"use strict";angular.module("com.2fdevs.videogular.plugins.dash",[]).directive("vgDash",["$window",function(a){return{restrict:"A",require:"^videogular",link:function(b,c,d,e){function f(){return"MediaSource"in a}var g,h=/^application\/dash\+xml/i;f()&&(b.isDASH=function(a){var b=h.test(a.type),c=a.src.indexOf&&a.src.indexOf(".mpd")>0;return b||c},b.onSourceChange=function(a){var c=a.src;b.isDASH(a)?angular.isFunction(dashjs&&dashjs.MediaPlayer)?(g=dashjs.MediaPlayer().create(),g.initialize(e.mediaElement[0],c,e.autoPlay)):(g=new MediaPlayer(new Dash.di.DashContext),g.setAutoPlay(e.autoPlay),g.startup(),g.attachView(e.mediaElement[0]),g.attachSource(c)):g&&(g.reset(),g=null,e.mediaElement.attr("src",c),e.stop())},b.$watch(function(){return e.sources},function(a,c){b.onSourceChange(a[0])}))}}}]);